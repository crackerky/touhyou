import React, { useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Toaster, toast } from 'react-hot-toast';\nimport { VoteIcon, Shield, Settings } from 'lucide-react';\nimport WalletConnection from './components/WalletConnection';\nimport VotingSection from './components/VotingSection';\nimport VoteResults from './components/VoteResults';\nimport NFTInfoCard from './components/NFTInfoCard';\nimport { useVoteStore } from './store/voteStore';\n\nfunction App() {\n  const { isVerified, hasVoted, error, nftVerificationStatus, nftData } = useVoteStore();\n\n  // 環境変数から設定を取得\n  const targetPolicyId = import.meta.env.VITE_TARGET_POLICY_ID || 'demo_policy_id_12345';\n  const appTitle = import.meta.env.VITE_APP_TITLE || 'NFT保有者限定投票';\n  const appDescription = import.meta.env.VITE_APP_DESCRIPTION || 'Cardano NFTホルダー向け投票システム';\n\n  // エラーがあればトーストを表示\n  useEffect(() => {\n    if (error) {\n      toast.error(error);\n    }\n  }, [error]);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-orange-50 via-yellow-50 to-red-50 flex flex-col\">\n      <Toaster position=\"top-center\" />\n      \n      <header className=\"py-6 px-4 text-center\">\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"inline-flex items-center justify-center gap-3\"\n        >\n          <div className=\"text-3xl\">🎯</div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-slate-900\">{appTitle}</h1>\n            <p className=\"text-sm text-slate-600 mt-1 flex items-center justify-center gap-2\">\n              <Shield className=\"h-4 w-4\" />\n              {appDescription}\n            </p>\n            \n            {/* NFT保有状況の簡易表示 */}\n            {isVerified && (\n              <motion.div\n                initial={{ opacity: 0, scale: 0.9 }}\n                animate={{ opacity: 1, scale: 1 }}\n                className=\"mt-2\"\n              >\n                {nftVerificationStatus === 'verified' && nftData ? (\n                  <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                    NFT保有確認済み ({nftData.nftCount}個)\n                  </div>\n                ) : nftVerificationStatus === 'failed' ? (\n                  <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium\">\n                    <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                    NFT保有未確認\n                  </div>\n                ) : nftVerificationStatus === 'pending' ? (\n                  <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium\">\n                    <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\n                    NFT確認中...\n                  </div>\n                ) : null}\n              </motion.div>\n            )}\n          </div>\n          <div className=\"text-3xl\">🍎</div>\n        </motion.div>\n      </header>\n      \n      <main className=\"flex-1 container max-w-6xl mx-auto px-4 py-8\">\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          {/* 左側: 投票セクション */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div className=\"flex justify-center\">\n                <AnimatePresence mode=\"wait\">\n                  {!isVerified ? (\n                    <WalletConnection key=\"connection\" />\n                  ) : (\n                    <VotingSection key=\"voting\" />\n                  )}\n                </AnimatePresence>\n              </div>\n              \n              <div className=\"flex justify-center\">\n                <VoteResults />\n              </div>\n            </div>\n          </div>\n          \n          {/* 右側: NFT情報とサイドバー */}\n          <div className=\"lg:col-span-1 space-y-6\">\n            {/* NFT情報カード */}\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.3 }}\n            >\n              <NFTInfoCard \n                policyId={targetPolicyId}\n                apiEndpoint={nftData?.verificationMethod || 'Blockfrost/Koios API'}\n              />\n            </motion.div>\n            \n            {/* 投票統計 (将来の拡張用) */}\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.4 }}\n              className=\"bg-white border border-gray-200 rounded-xl p-4\"\n            >\n              <div className=\"flex items-center gap-2 mb-3\">\n                <VoteIcon className=\"h-5 w-5 text-blue-600\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">投票統計</h3>\n              </div>\n              \n              <div className=\"space-y-3 text-sm text-gray-600\">\n                <div className=\"flex justify-between\">\n                  <span>NFT検証方法:</span>\n                  <span className=\"font-medium\">\n                    {nftData?.verificationMethod === 'blockfrost' && 'Blockfrost API'}\n                    {nftData?.verificationMethod === 'koios' && 'Koios API'}\n                    {nftData?.verificationMethod === 'nmkr' && 'NMKR API'}\n                    {!nftData?.verificationMethod && '未確認'}\n                  </span>\n                </div>\n                \n                <div className=\"flex justify-between\">\n                  <span>投票方式:</span>\n                  <span className=\"font-medium\">NFT保有者限定</span>\n                </div>\n                \n                <div className=\"flex justify-between\">\n                  <span>重複投票:</span>\n                  <span className=\"font-medium text-green-600\">防止済み</span>\n                </div>\n                \n                <div className=\"pt-2 border-t\">\n                  <div className=\"flex items-center gap-2 text-xs text-gray-500\">\n                    <Settings className=\"h-3 w-3\" />\n                    <span>ブロックチェーン認証による安全な投票</span>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n            \n            {/* デモ情報 (開発環境のみ) */}\n            {(import.meta.env.DEV || import.meta.env.VITE_ENABLE_DEMO === 'true') && (\n              <motion.div\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: 0.5 }}\n                className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4\"\n              >\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className=\"text-yellow-600\">⚠️</div>\n                  <h3 className=\"text-sm font-semibold text-yellow-900\">開発モード</h3>\n                </div>\n                \n                <div className=\"text-xs text-yellow-700 space-y-1\">\n                  <p>• デモウォレットでNFT保有をシミュレート</p>\n                  <p>• アドレスに \"demo\" または \"test\" が含まれる場合、NFT保有とみなされます</p>\n                  <p>• 本番環境では実際のNFT保有確認が行われます</p>\n                </div>\n              </motion.div>\n            )}\n          </div>\n        </div>\n      </main>\n      \n      <footer className=\"py-6 px-4 text-center text-slate-500 text-sm\">\n        <div className=\"flex items-center justify-center gap-2 mb-2\">\n          <span>🎯</span>\n          <p>NFT保有者限定投票システム &copy; {new Date().getFullYear()}</p>\n          <span>🛡️</span>\n        </div>\n        <div className=\"flex items-center justify-center gap-4 text-xs\">\n          <span>Powered by Cardano</span>\n          <span>•</span>\n          <span>Blockfrost API</span>\n          <span>•</span>\n          <span>NMKR対応</span>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;"